<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Properties>
        <Property name="LOG_PATH">logs/image2d</Property>
        <Property name="DEFAULT_PATTERN">[%d{yyyy-MM-dd HH:mm:ss.SSS}] [%-5.5p] [%t] ${sys:PID} - [%t] %C : %m%n%xwEx</Property>
        <Property name="COLOR_PATTERN">[%clr{%d{yyyy-MM-dd HH:mm:ss.SSS}}{faint}] [%clr{%-5.5p}] [%clr{%t}{cyan}] %clr{${sys:PID}}{magenta} %clr{-}{faint} %clr{%C}{cyan} %clr{:}{faint} %m%n%xwEx</Property>
        <Property name="TEST_PATTERN">%d %5p [%c] %m%n</Property>
        <!--        <Property name="COLOR_PATTERN">[%clr{%d{yyyy-MM-dd HH:mm:ss.SSS}}{faint}] %clr{%5p} %clr{${sys:PID}}{magenta} %clr{-&#45;&#45;}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint} %m%n%xwEx</Property>-->
    </Properties>

    <Appenders>
        <Console name="ConsoleAppender" target="SYSTEM_OUT" follow="true">
            <PatternLayout pattern="${COLOR_PATTERN}"/>
        </Console>

        <!--
        <File name="file" fileName="${LOG_PATH}/server.log" append="false">
            <PatternLayout pattern="${COLOR_PATTERN}" />
        </File>
        -->

        <RollingFile name ="RollingFileAppender">
            <FileName>${LOG_PATH}/server.log</FileName>
            <FilePattern>${LOG_PATH}/server-%d{yyyy-MM-dd}_%i.log</FilePattern>
            <PatternLayout>
                <Pattern>${DEFAULT_PATTERN}</Pattern>
            </PatternLayout>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true" />
            </Policies>
            <DefaultRolloverStrategy>
                <Delete basePath="${LOG_PATH}" maxDepth="1">
                    <!--  exceeds : 이 값을 넘을 시 파일이 제거된다 ex) exceeds="3" => 3번째 로그파일이 쌓일 때 1번째 로그파일이 지워진다 -->
                    <IfAccumulatedFileCount exceeds="30"/>
                </Delete>
            </DefaultRolloverStrategy>
        </RollingFile>
    </Appenders>


    <Loggers>
        <!-- Root : 일반적인 로그 정책, 반드시 하나 정의해야함 -->
        <Root level="DEBUG" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Root>

        <!-- springframework logger -->
        <Logger name="org.springframework" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender" />
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>


        <!-- log4jdbc 옵션 설정 -->
        <!--
        <Logger name="log4jdbc" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender" />
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        -->

        <!-- DB transaction -->
        <!--
        <Logger name="org.mybatis.spring.SqlSessionUtils" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender" />
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        -->

        <!-- DB Connection Pool 관련 -->
        <!--
        <Logger name="com.zaxxer.hikari.pool.PoolBase" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="com.zaxxer.hikari.pool.HikariPool" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="com.zaxxer.hikari.HikariDataSource" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="com.zaxxer.hikari.HikariConfig" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        -->

        <!-- jdbc logger -->
        <!--
        <Logger name="jdbc.sqlonly" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="jdbc.sqltiming" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="jdbc.resultsettable" level="ERROR" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="jdbc.audit" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="jdbc.resultset" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="jdbc.connection" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        -->

        <!-- 3rdparty Loggers -->
        <!--
        <Logger name="org.apache" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="org.mongodb.driver" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="org.postgresql" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="org.mybatis.spring" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
        <Logger name="tis.spring.mapper" level="OFF" additivity="false">
            <AppenderRef ref="ConsoleAppender"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Logger>
          -->
    </Loggers>

</Configuration>